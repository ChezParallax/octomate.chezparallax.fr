import{j as t}from"../assets/jsx-runtime-D5KAtRYC.js";import{r as i}from"../assets/index-CVf8TyFT.js";import{c as O,a as q,d as B}from"../assets/useAnalytics-Cb5LBqds.js";const H="modulepreload",G=function(d){return"/"+d},D={},w=function(e,a,n){let h=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),r=p?.nonce||p?.getAttribute("nonce");h=Promise.allSettled(a.map(m=>{if(m=G(m),m in D)return;D[m]=!0;const v=m.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${j}`))return;const f=document.createElement("link");if(f.rel=v?"stylesheet":H,v||(f.as="script"),f.crossOrigin="",f.href=m,r&&f.setAttribute("nonce",r),document.head.appendChild(f),v)return new Promise((k,g)=>{f.addEventListener("load",k),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${m}`)))})}))}function b(p){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=p,window.dispatchEvent(r),!r.defaultPrevented)throw p}return h.then(p=>{for(const r of p||[])r.status==="rejected"&&b(r.reason);return e().catch(b)})},U=48,X={copper:{gradient:"from-copper/10 to-copper/5",border:"border-copper/20",title:"text-copper"},"light-blue":{gradient:"from-light-blue/10 to-light-blue/5",border:"border-light-blue/20",title:"text-light-blue"}};class Y{constructor(e,a={}){this.element=e,this.options={threshold:10,velocityThreshold:.3,momentumReduction:.95,snapThreshold:.4,maxVelocity:8,...a},this.state={isDragging:!1,startX:0,currentX:0,deltaX:0,velocity:0,lastMoveTime:0,animationFrame:null},this.callbacks={},this.bindEvents()}bindEvents(){this.element.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!1}),this.element.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),this.element.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!0}),this.element.addEventListener("touchcancel",this.handleTouchEnd.bind(this),{passive:!0})}handleTouchStart(e){if(e.touches.length!==1)return;const a=e.touches[0];this.state.startX=a.clientX,this.state.currentX=a.clientX,this.state.lastMoveTime=Date.now(),this.state.velocity=0,this.state.animationFrame&&(cancelAnimationFrame(this.state.animationFrame),this.state.animationFrame=null),this.callbacks.onStart?.(e,this.state)}handleTouchMove(e){if(e.touches.length!==1)return;const a=e.touches[0],n=Date.now(),h=n-this.state.lastMoveTime;if(this.state.currentX=a.clientX,this.state.deltaX=this.state.currentX-this.state.startX,h>0){const b=this.state.currentX-(this.state.startX+this.state.deltaX);this.state.velocity=b/h}!this.state.isDragging&&Math.abs(this.state.deltaX)>this.options.threshold&&(this.state.isDragging=!0,this.callbacks.onDragStart?.(e,this.state),e.preventDefault()),this.state.isDragging&&(e.preventDefault(),this.callbacks.onDrag?.(e,this.state)),this.state.lastMoveTime=n}handleTouchEnd(e){if(!this.state.isDragging){this.callbacks.onTap?.(e,this.state),this.resetState();return}Math.abs(this.state.velocity)>this.options.velocityThreshold?this.startMomentum():this.callbacks.onDragEnd?.(e,this.state),this.resetState()}startMomentum(){const{velocity:e}=this.state,a=e>0?1:-1;let n=Math.min(Math.abs(e),this.options.maxVelocity)*a;const h=()=>{if(Math.abs(n)<.01){this.callbacks.onMomentumEnd?.(this.state);return}this.state.deltaX+=n*16,this.callbacks.onMomentum?.(this.state),n*=this.options.momentumReduction,this.state.animationFrame=requestAnimationFrame(h)};h()}resetState(){this.state.isDragging=!1,this.state.startX=0,this.state.currentX=0,this.state.deltaX=0,this.state.velocity=0}on(e,a){return this.callbacks[e]=a,this}destroy(){this.state.animationFrame&&cancelAnimationFrame(this.state.animationFrame)}}function ee(){const{trackInteraction:d}=B("case_studies"),[e,a]=i.useState([]),[n,h]=i.useState(0),[b,p]=i.useState(!0),[r,m]=i.useState(()=>typeof window<"u"?window.innerWidth<768:!1),[v,j]=i.useState(0),[f,k]=i.useState(!1),g=i.useRef(null),E=i.useRef(null),[C,y]=i.useState(()=>typeof window<"u"?window.innerWidth*.25:0),[R,A]=i.useState(()=>typeof window<"u"?window.innerWidth*.25+U:0),[F,I]=i.useState(()=>typeof window<"u"?window.innerWidth/2:0),[S,P]=i.useState(0);i.useEffect(()=>{const s=()=>{m(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const M=!r&&e.length>0?"400px":"50%";i.useEffect(()=>{if(typeof window>"u"||r)return;const s=()=>{if(!g.current)return;const c=window.innerWidth*.25,x=parseFloat(getComputedStyle(g.current).columnGap||"0"),{left:l,width:u}=g.current.parentElement?.getBoundingClientRect()??{left:0,width:window.innerWidth};y(c),A(c+x),I(l+u/2)};requestAnimationFrame(s);const o=()=>requestAnimationFrame(s);return window.addEventListener("resize",o,{passive:!0}),()=>window.removeEventListener("resize",o)},[e.length,r]),i.useEffect(()=>{if(typeof window>"u"||r)return;const s=()=>{if(!g.current)return;const o=Array.from(g.current.children).map(c=>(c.firstElementChild??c).getBoundingClientRect().height);P(Math.max(0,...o))};return requestAnimationFrame(s),window.addEventListener("resize",s,{passive:!0}),()=>window.removeEventListener("resize",s)},[e.length,r]),i.useEffect(()=>{if(!r||!g.current||e.length===0)return;const s=g.current,c=s.offsetWidth;return E.current=new Y(s,{threshold:15,velocityThreshold:.5,snapThreshold:.25,momentumReduction:.92}),E.current.on("onDragStart",()=>{k(!1),s.style.willChange="transform"}).on("onDrag",(x,l)=>{const N=-n*c+l.deltaX,$=0,T=-(e.length-1)*c;let _=N;N>$?_=$+(N-$)*.3:N<T&&(_=T+(N-T)*.3),j(_)}).on("onDragEnd",(x,l)=>{L(l,c)}).on("onMomentumEnd",x=>{L(x,c)}),()=>{E.current?.destroy(),s.style.willChange="auto"}},[r,e.length,n]);const L=i.useCallback((s,o)=>{const{deltaX:c}=s,l=(g.current?.offsetWidth||0)*.25;let u=n;Math.abs(c)>l&&(c>0&&n>0?u=n-1:c<0&&n<e.length-1&&(u=n+1)),u!==n&&d("swipe",u,e[u]?.id||`slide_${u}`),k(!0),h(u),j(-u*o),setTimeout(()=>{g.current&&(g.current.style.willChange="auto")},500)},[n,e.length,d,e]);i.useEffect(()=>{(async()=>{try{const c=Object.entries(Object.assign({"../../data/case-studies/01-base-contacts.json":()=>w(()=>import("../assets/01-base-contacts-C9Yr5Tsf.js"),[]).then(l=>l.default),"../../data/case-studies/02-sequences-relance.json":()=>w(()=>import("../assets/02-sequences-relance-BPpVSZM1.js"),[]).then(l=>l.default),"../../data/case-studies/03-assistant-linkedin.json":()=>w(()=>import("../assets/03-assistant-linkedin-DtvS83xs.js"),[]).then(l=>l.default),"../../data/case-studies/04-fiches-produits.json":()=>w(()=>import("../assets/04-fiches-produits-CKUqyz3n.js"),[]).then(l=>l.default),"../../data/case-studies/05-relance-factures.json":()=>w(()=>import("../assets/05-relance-factures-CyJ2bbYc.js"),[]).then(l=>l.default),"../../data/case-studies/06-automation-rh.json":()=>w(()=>import("../assets/06-automation-rh-DQebktLb.js"),[]).then(l=>l.default)})).sort(([l],[u])=>l.localeCompare(u)),x=await Promise.all(c.map(([l,u])=>u()));a(x),h(Math.floor(x.length/2))}catch(o){console.error("Failed to load case studies",o)}finally{p(!1)}})()},[]);const z=i.useCallback(()=>{const s=(n+1)%e.length;d("arrow",s,e[s]?.id||`slide_${s}`),h(s)},[e.length,n,d,e]),V=i.useCallback(()=>{const s=(n-1+e.length)%e.length;d("arrow",s,e[s]?.id||`slide_${s}`),h(s)},[e.length,n,d,e]),W=i.useCallback(s=>{if(d("click",s,e[s]?.id||`slide_${s}`),h(s),r){const o=g.current?.offsetWidth||0;j(-s*o),k(!0)}},[r,d,e]);return b?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",id:"case-studies-skeleton",children:[...Array(3)].map((s,o)=>t.jsx("div",{className:"h-[450px] md:h-[600px] rounded-2xl bg-beige/10 animate-pulse"},o))}):e.length===0?t.jsxs("div",{className:"text-center py-20 text-beige/60",children:["Aucune étude de cas disponible - Debug:"," ",JSON.stringify({isLoading:b,studiesLength:e.length})]}):t.jsxs("div",{className:"relative case-studies-container",children:[t.jsx("div",{className:"flex justify-center mb-8 space-x-2",children:e.map((s,o)=>t.jsx("button",{onClick:()=>W(o),className:`w-3 h-3 rounded-full transition-all duration-300 ${o===n?"bg-copper scale-125":"bg-beige/30 hover:bg-copper/50"}`,"aria-label":`Aller à l'étude de cas ${o+1}`},o))}),t.jsx("button",{onClick:V,className:"hidden md:flex absolute left-4 z-40 w-12 h-12 bg-copper/20 hover:bg-copper/30 rounded-full items-center justify-center text-copper hover:text-beige transition-all duration-300 backdrop-blur-lg border border-copper/20",style:{top:M,transform:"translateY(-50%)"},"aria-label":"Case study précédente",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:z,className:"hidden md:flex absolute right-4 z-40 w-12 h-12 bg-copper/20 hover:bg-copper/30 rounded-full items-center justify-center text-copper hover:text-beige transition-all duration-300 backdrop-blur-lg border border-copper/20",style:{top:M,transform:"translateY(-50%)"},"aria-label":"Case study suivante",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),t.jsxs("div",{className:"md:hidden flex justify-center items-center gap-2 -mt-6 mb-4 text-beige/60 text-sm",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),t.jsx("span",{children:"Balayez pour naviguer"}),t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden md:block absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-dark-blue to-transparent z-30 pointer-events-none"}),t.jsx("div",{className:"hidden md:block absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-dark-blue to-transparent z-30 pointer-events-none"}),t.jsx("div",{className:`overflow-y-visible py-12 ${r?"overflow-x-hidden px-8":"overflow-x-hidden px-0"}`,style:{minHeight:S?S+120:void 0},children:t.jsx("div",{ref:g,className:`flex items-start ${r?"":"gap-x-12"} ${r&&f?"transition-transform duration-500 ease-out":r?"":"transition-transform duration-500 ease-out"}`,style:{transform:r?`translate3d(${v}px, 0, 0)`:`translateX(${F-n*R-C/2}px)`,willChange:r&&!f?"transform":"auto"},children:e.map((s,o)=>{const c=o===n;return t.jsx("div",{className:`flex-shrink-0 transition-all duration-500 ${r?"w-full px-4":""} ${c?r?"scale-105 opacity-100":"scale-110 opacity-100":r?"scale-100 opacity-100":"scale-100 opacity-80"}`,onClick:()=>!c&&W(o),style:{cursor:c?"default":"pointer",width:r?void 0:`${C}px`},children:t.jsx(J,{study:s,isActive:c,isMobile:r})},s.id)})})})]})]})}const J=i.memo(function({study:e,isActive:a,isMobile:n}){const{startViewTracking:h,endViewTracking:b}=O("case_study",e.id,e.title),p=X[e.theme]||X.copper;return i.useEffect(()=>{a?(h(),q.trackContentEffectiveness(e.id,"viewed",0)):b()},[a,h,b,e.id]),t.jsxs("div",{className:`
      bg-gradient-to-br ${p.gradient} 
      backdrop-blur-lg border ${p.border} rounded-2xl 
      hover:border-beige/30 hover:shadow-xl hover:shadow-black/20
      transition-all duration-500 ease-out
      relative overflow-hidden group p-6 md:p-8
      ${a&&!n?"hover:transform hover:scale-[1.02] shadow-2xl":"cursor-pointer"}
      ${n?"min-h-[500px]":e.layout==="large"?"min-h-[600px]":"min-h-[450px]"}
      ${a?"ring-2 ring-copper/20 shadow-2xl":""}
    `,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out z-10 pointer-events-none"}),t.jsxs("div",{className:"relative z-20",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"px-3 py-1 bg-green-500/20 text-green-400 text-xs rounded-full border border-green-500/30",children:"Étude de cas"}),t.jsx("div",{className:"text-3xl",children:e.icon})]}),t.jsx("h3",{className:`text-2xl md:text-3xl font-montserrat font-bold mb-4 ${p.title} leading-tight`,children:e.title}),t.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[t.jsx("div",{className:"h-1 w-8 bg-gradient-to-r from-copper to-light-blue rounded-full"}),t.jsx("p",{className:"text-sm text-beige/70 font-medium",children:e.client})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-beige mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full"}),e.challenge.title]}),t.jsx("p",{className:"text-beige/80 text-sm",children:e.challenge.description})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-beige mb-2 flex items-center gap-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${e.theme==="copper"?"bg-copper":"bg-light-blue"}`}),e.solution.title]}),t.jsx("p",{className:"text-beige/80 text-sm",children:e.solution.description})]})]}),t.jsxs("div",{className:`
          ${e.results.theme==="green"?"bg-green-500/10 border-green-500/20":""}
          ${e.results.theme==="purple"?"bg-purple-500/10 border-purple-500/20":""}
          ${e.results.theme==="blue"?"bg-blue-500/10 border-blue-500/20":""}
          ${e.results.theme==="orange"?"bg-orange-500/10 border-orange-500/20":""}
          border rounded-2xl p-6 mb-6 relative overflow-hidden
        `,children:[t.jsx("div",{className:`absolute top-0 right-0 w-16 h-16 
            ${e.results.theme==="green"?"bg-green-400/10":""}
            ${e.results.theme==="purple"?"bg-purple-400/10":""}
            ${e.results.theme==="blue"?"bg-blue-400/10":""}
            ${e.results.theme==="orange"?"bg-orange-400/10":""}
            rounded-bl-full -translate-y-2 translate-x-2
          `}),t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0
              ${e.results.theme==="green"?"bg-green-400":""}
              ${e.results.theme==="purple"?"bg-purple-400":""}
              ${e.results.theme==="blue"?"bg-blue-400":""}
              ${e.results.theme==="orange"?"bg-orange-400":""}
            `}),t.jsx("h4",{className:`font-semibold text-lg
              ${e.results.theme==="green"?"text-green-400":""}
              ${e.results.theme==="purple"?"text-purple-400":""}
              ${e.results.theme==="blue"?"text-blue-400":""}
              ${e.results.theme==="orange"?"text-orange-400":""}
            `,children:"Résultats obtenus"})]}),t.jsx("div",{className:`grid ${e.results.metrics.length===1?"grid-cols-1":e.results.metrics.length===2?"grid-cols-2":"grid-cols-2 md:grid-cols-3"} gap-4 md:gap-6 text-center mb-6`,children:e.results.metrics.map((r,m)=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:`text-3xl md:text-4xl font-bold mb-2
                  ${e.results.theme==="green"?"text-green-400":""}
                  ${e.results.theme==="purple"?"text-purple-400":""}
                  ${e.results.theme==="blue"?"text-blue-400":""}
                  ${e.results.theme==="orange"?"text-orange-400":""}
                `,children:r.value}),t.jsx("div",{className:"text-xs text-beige/70 font-medium uppercase tracking-wide",children:r.label})]},m))}),t.jsx("div",{className:"space-y-1 text-xs",children:e.results.achievements.map((r,m)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`w-1 h-1 rounded-full
                  ${e.results.theme==="green"?"bg-green-400":""}
                  ${e.results.theme==="purple"?"bg-purple-400":""}
                  ${e.results.theme==="blue"?"bg-blue-400":""}
                  ${e.results.theme==="orange"?"bg-orange-400":""}
                `}),t.jsx("span",{className:`
                  ${e.results.theme==="green"?"text-green-400":""}
                  ${e.results.theme==="purple"?"text-purple-400":""}
                  ${e.results.theme==="blue"?"text-blue-400":""}
                  ${e.results.theme==="orange"?"text-orange-400":""}
                `,children:r})]},m))})]}),e.testimonial&&t.jsxs("blockquote",{className:"border-l-2 border-copper pl-4 italic text-beige/80 text-sm",children:['"',e.testimonial.quote,'"',t.jsxs("cite",{className:"block text-xs text-beige/60 mt-1",children:["— ",e.testimonial.author]})]})]})]})},(d,e)=>d.study===e.study&&d.isActive===e.isActive&&d.isMobile===e.isMobile);export{ee as default};
