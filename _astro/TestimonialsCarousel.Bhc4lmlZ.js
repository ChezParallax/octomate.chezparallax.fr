import{j as e}from"../assets/jsx-runtime-D5KAtRYC.js";import{r as o}from"../assets/index-CVf8TyFT.js";import{u as w,C as N}from"../assets/CarouselNavigation-Da5hrM7Y.js";function C({testimonial:r}){const[t,i]=o.useState(!1),[c,s]=o.useState(!1),u=()=>{i(!0)},n=()=>{s(!0)};return e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.avatar.gradient} rounded-full flex items-center justify-center ${r.avatar.textColor} font-bold text-xl transition-opacity duration-300 ${c&&!t?"opacity-0":"opacity-100"}`,children:r.initials}),!t&&e.jsx("img",{src:r.avatar.image,alt:`Photo de ${r.name}`,className:`absolute inset-0 w-full h-full object-cover rounded-full border-2 border-beige/20 transition-opacity duration-300 ${c?"opacity-100":"opacity-0"}`,onError:u,onLoad:n,loading:"lazy"}),c&&!t&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-dark-blue/10 rounded-full"})]})}const k=o.memo(function({testimonial:t,isActive:i=!1,onClick:c}){const u=(n=>{const d={green:"text-green-400 bg-green-400",blue:"text-blue-400 bg-blue-400",purple:"text-purple-400 bg-purple-400",orange:"text-orange-400 bg-orange-400"};return d[n]||d.green})(t.result.theme);return e.jsxs("div",{className:`bg-gradient-to-br from-beige/5 via-beige/3 to-transparent 
        backdrop-blur-lg border border-beige/15 rounded-2xl
        relative overflow-hidden group p-6 md:min-h-[400px] flex flex-col
        transition-all duration-500 ease-out cursor-pointer
        min-h-[400px]
        ${i?"md:opacity-100 md:scale-105 md:shadow-2xl md:ring-2 md:ring-copper/20 md:hover:scale-110":"md:opacity-70 md:hover:opacity-90 md:hover:scale-102"}
        // Mobile : toutes les cartes ont la même apparence
        hover:border-beige/30 hover:shadow-xl hover:shadow-black/20
      `,onClick:c,role:"article",tabIndex:0,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),c?.())},children:[i&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent 
                      -translate-x-full group-hover:translate-x-full transition-transform 
                      duration-700 ease-out z-10 pointer-events-none`}),e.jsxs("div",{className:"relative z-20 flex flex-col h-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(C,{testimonial:t})}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(t.rating)].map((n,d)=>e.jsx("span",{children:"⭐"},d))}),e.jsxs("span",{className:"text-beige/60 text-sm",children:[t.rating,"/5"]})]})]}),e.jsxs("blockquote",{className:"text-beige/90 italic text-sm leading-relaxed flex-grow",children:['"',t.quote,'"']}),e.jsxs("div",{className:"border-t border-beige/10 pt-4 mt-6",children:[e.jsx("div",{className:"font-semibold text-copper text-lg",children:t.name}),e.jsx("div",{className:"text-sm text-beige/60 mb-3",children:t.company}),e.jsxs("div",{className:`text-sm mt-2 flex items-center justify-center gap-2 ${u.split(" ")[0]}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${u.split(" ")[1]}`}),e.jsx("span",{children:t.result.text})]})]})]})]})},(r,t)=>r.testimonial===t.testimonial&&r.isActive===t.isActive),p=[{id:"pierre-m",name:"Pierre M.",initials:"PM",company:"Gérant, Comkwatt Communication",avatar:{gradient:"from-copper to-copper/80",textColor:"text-dark-blue",image:"/assets/images/testimonials/quote_pierre-m.webp"},rating:5,quote:"Grâce à la solution qu'il nous a mise en place, nous avons pu récupérer automatiquement les numéros de téléphone ou adresses email pour près de 85 % de la base — un gain de temps colossal par rapport à un traitement manuel qui aurait pris des mois.",result:{text:"Système : Enrichissement automatique des données",theme:"green"}},{id:"patrick-b",name:"Patrick B.",initials:"PB",company:"Directeur, Rietmann France",avatar:{gradient:"from-light-blue to-light-blue/80",textColor:"text-dark-blue",image:"/assets/images/testimonials/quote_patrick-b.webp"},rating:5,quote:"Chaque mois, nous passions plusieurs heures à remettre en forme des tableaux de tarifs. Grâce à l'automatisation mise en place par Thibaud (un simple glissé-déposé !), nous avons gagné un temps considérable et supprimé totalement le risque d'erreur.",result:{text:"Système : Analyse et réorganisation des tableaux de tarifs",theme:"blue"}},{id:"sarah-l",name:"Sarah L.",initials:"SL",company:"Directrice Commerciale, Orphise",avatar:{gradient:"from-copper to-light-blue",textColor:"text-dark-blue",image:"/assets/images/testimonials/quote_sarah-l.webp"},rating:5,quote:"Ce système nous a libérés d'une tâche lourde et répétitive. Chaque commercial gagne plusieurs heures par semaine et surtout : ils se concentrent enfin sur ce qu'ils font le mieux, convaincre nos prospects.",result:{text:"Système : Séquences de relance",theme:"purple"}}],T=r=>({trackInteraction:(t,i,c)=>{}});function E(){const[r,t]=o.useState(!0),{trackInteraction:i}=T();o.useEffect(()=>{const a=setTimeout(()=>{r&&t(!1)},3e3);return()=>clearTimeout(a)},[r]);const{emblaRef:c,emblaApi:s,prevBtnDisabled:u,nextBtnDisabled:n,selectedIndex:d,scrollSnaps:h,scrollPrev:v,scrollNext:j,scrollTo:x}=w({options:{loop:!0,align:"center",slidesToScroll:1,containScroll:!1}}),g=o.useCallback(()=>1,[]);o.useEffect(()=>{if(s){if(typeof window<"u"&&window.innerWidth>=768){const a=g();x(a,!0),setTimeout(()=>{let l=0;const m=p.length,b=()=>{l<m-1?(s.scrollNext(),l++,setTimeout(b,10)):setTimeout(()=>{s.scrollTo(g())},10)};b()},200)}t(!1)}else{const a=setTimeout(()=>{t(!1)},2e3);return()=>clearTimeout(a)}},[s,g,x]);const f=o.useCallback(a=>{i("swipe",a,p[a]?.id)},[i]),y=o.useCallback(a=>{s&&a!==d&&(s.scrollTo(a),i("card_click",a,p[a]?.id))},[s,d,i]);return o.useEffect(()=>{if(!s)return;let a=-1;const l=()=>{const m=s.selectedScrollSnap();m!==a&&(a=m,f(m))};return s.on("select",l),()=>{s.off("select",l)}},[s,f]),r?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",id:"testimonials-skeleton",children:[...Array(3)].map((a,l)=>e.jsx("div",{className:"h-[400px] rounded-2xl bg-beige/10 animate-pulse"},l))}):p.length===0?e.jsx("div",{className:"text-center py-20 text-beige/60",children:"Aucun témoignage disponible"}):e.jsxs("div",{className:"relative carousel-wrapper",children:[e.jsx(N,{scrollSnaps:h,selectedIndex:d,scrollTo:x,scrollPrev:v,scrollNext:j,prevBtnDisabled:u,nextBtnDisabled:n,showArrows:!0}),e.jsx("div",{className:"embla",ref:c,style:{paddingTop:"20px",paddingBottom:"20px"},children:e.jsx("div",{className:"flex items-start embla__container",style:{gap:typeof window<"u"&&window.innerWidth>=768?"40px":"20px",paddingLeft:"16px",paddingRight:"16px"},children:p.map((a,l)=>e.jsx("div",{className:`flex-none embla__slide
                // Mobile : largeur complète moins paddings
                w-[calc(100vw-32px-20px)] 
                // Desktop : 30% comme spécifié
                md:w-[30%]
                // Largeur minimale pour lisibilité
                min-w-[280px]
              `,children:e.jsx(k,{testimonial:a,isActive:d===l,onClick:()=>y(l)})},a.id))})})]})}export{E as default};
